module.exports=function(t){var o={};function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=o,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var a in t)n.d(e,a,function(o){return t[o]}.bind(null,a));return e},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="",n(n.s=8)}([function(t,o){t.exports=flarum.core.compat["common/extend"]},function(t,o){t.exports=flarum.core.compat["common/components/Button"]},function(t,o){t.exports=flarum.core.compat["common/utils/classList"]},function(t,o){t.exports=flarum.core.compat["forum/components/CommentPost"]},function(t,o){t.exports=flarum.core.compat["common/utils/abbreviateNumber"]},function(t,o){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},function(t,o){t.exports=flarum.core.compat["forum/components/DiscussionListItem"]},,function(t,o,n){"use strict";n.r(o);var e=n(0),a=n(3),s=n.n(a),i=n(1),r=n.n(i),u=n(2),c=n.n(u),f=function(t,o,n,e,a){if(void 0===a&&(a=t.discussion()),!a||a.canVote()||t.canVote())return o&&n&&(o=!1,n=!1),e&&e(!0),m.redraw(),t.save([o,n,"vote"]).then((function(){return null}),(function(){return null})).then((function(){e&&e(!1),a&&a.pushAttributes({votes:t.votes()}),m.redraw()}))},l=n(6),d=n.n(l),p=n(4),v=n.n(p),b=n(5),h=n.n(b);app.initializers.add("block-cat/guest-gamification",(function(){if(flarum.extensions["fof-gamification"]){var t=flarum.extensions["fof-gamification"].helpers.setting,o=function(t,o){var n=t.firstPost();return n&&void 0!==n[o]()?n[o]():t[o]()};Object(e.extend)(s.a.prototype,"actionItems",(function(o){var n=this;if(o.has("votes")){var e=this.attrs.post,a=e.hasDownvoted(),s=e.hasUpvoted(),i=t("iconName")||"thumbs",u=t("upVotesOnly",!0),l=e.canSeeVotes(),d=e.canVote(),p=function(t,o){return f(e,t,o,(function(t){return n.voteLoading=t}))};o.replace("votes",m("div",{className:c()("CommentPost-votes",t("useAlternateLayout",!0)&&"alternateLayout")},r.a.component({icon:this.voteLoading?void 0:"fas fa-fw fa-"+i+"-up",className:c()("Post-vote Post-upvote",s&&"Post-vote--active"),loading:this.voteLoading,disabled:this.voteLoading||!d||!l,onclick:function(){return p(!s,!1)},"aria-label":app.translator.trans("fof-gamification.forum.post.upvote_button")}),m("label",{className:"Post-points"},e.votes()),!u&&r.a.component({icon:this.voteLoading?void 0:"fas fa-fw fa-"+i+"-down",className:c()("Post-vote Post-downvote",a&&"Post-vote--active"),loading:this.voteLoading,disabled:!d||!l,onclick:function(){return p(!1,!a)},"aria-label":app.translator.trans("fof-gamification.forum.post.downvote_button")})),10)}})),t("useAlternateLayout",!0)&&Object(e.extend)(d.a.prototype,"view",(function(n){var e=this,a=this.attrs.discussion;if(a.seeVotes()&&n&&n.children){var s=n.children.find((function(t){return t&&t.attrs&&t.attrs.className&&t.attrs.className.includes("DiscussionListItem-content")})),i=a.firstPost(),u=o(a,"hasUpvoted"),c=o(a,"hasDownvoted"),l=o(a,"canVote"),d=t("upVotesOnly",!0),p=t("iconNameAlt")||"arrow",b=function(t,o){return f(i,t,o,(function(t){return e.voteLoading=t}))};s.children.shift(),s.children.unshift(m("div",{className:"DiscussionListItem-votes alternateLayout","data-upvotes-only":d},m(r.a,{className:"DiscussionListItem-voteButton DiscussionListItem-voteButton--up Button Button--icon Button--text",icon:"fas fa-fw fa-"+p+"-up","data-active":u,disabled:!l||this.voteLoading,onclick:function(){return b(!u,!1)},"aria-label":app.translator.trans("fof-gamification.forum.post.upvote_button")}),m("span",{class:"DiscussionListItem-voteCount"},v()(o(a,"votes")||0)),!d&&m(r.a,{className:"DiscussionListItem-voteButton DiscussionListItem-voteButton--down Button Button--icon Button--text",icon:"fas fa-fw fa-"+p+"-down","data-active":c,disabled:!l||this.voteLoading,onclick:function(){return b(!1,!c)},"aria-label":app.translator.trans("fof-gamification.forum.post.downvote_button")}),this.voteLoading&&m(h.a,{display:"inline",size:"small"})))}})),t("altPostVotingUi",!0)&&Object(e.extend)(s.a.prototype,"headerItems",(function(o){var n=this;if(o.has("votes")){var e=this.attrs.post;if(!e.canSeeVotes())return;var a=e.hasDownvoted(),s=e.hasUpvoted(),i=t("iconName")||"thumbs",u=t("upVotesOnly",!0),c=e.canSeeVotes(),l=!app.session.user||e.canVote(),d=function(t,o){return f(e,t,o,(function(t){n.voteLoading=t}))};o.replace("votes",m("div",{className:"Post-votes alternateLayout","data-upvotes-only":u},m(r.a,{className:"Post-voteButton Post-voteButton--up Button Button--icon Button--text",icon:"fas fa-fw fa-"+i+"-up","data-active":s,disabled:!l||this.voteLoading||!c,onclick:function(){return d(!s,!1)},"aria-label":app.translator.trans("fof-gamification.forum.post.upvote_button")}),m("span",{class:"Post-voteCount"},v()(e.votes()||0)),!u&&m(r.a,{className:"Post-voteButton Post-voteButton--down Button Button--icon Button--text",icon:"fas fa-fw fa-"+i+"-down","data-active":a,disabled:!l||this.voteLoading,onclick:function(){return d(!1,!a)},"aria-label":app.translator.trans("fof-gamification.forum.post.downvote_button")}),this.voteLoading&&m(h.a,{display:"inline",size:"small"})),1e4)}}))}}))}]);
//# sourceMappingURL=forum.js.map